/* style.css - 全体のスタイル・アニメーション */

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Hiragino Kaku Gothic Pro', 'Yu Gothic', 'Meiryo', sans-serif;
  background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 50%, #FFCC80 100%);
  min-height: 100vh;
  min-height: 100dvh;
  overflow-x: hidden;
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

#game {
  max-width: 480px;
  margin: 0 auto;
  min-height: 100vh;
  min-height: 100dvh;
  position: relative;
}

/* === スクリーン === */
.screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 16px;
  gap: 16px;
  min-height: 100vh;
  min-height: 100dvh;
}

.screen-title {
  font-size: 1.5rem;
  color: #E65100;
  text-align: center;
}

.screen-subtitle { color: #795548; font-size: 1rem; }

/* === タイトル画面 === */
.title-screen { justify-content: center; gap: 20px; }

.title-hamburger {
  position: relative;
  width: 160px;
  height: 160px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.title-burger-emoji { font-size: 100px; line-height: 1; }

.game-title {
  font-size: 1.8rem;
  color: #BF360C;
  text-align: center;
  line-height: 1.4;
  text-shadow: 2px 2px 0 rgba(255,255,255,0.5);
}

.game-title .subtitle {
  font-size: 1.1rem;
  color: #E65100;
}

.catchcopy {
  font-size: 1.3rem;
  color: #FF6F00;
  font-weight: bold;
}

/* === 目のアニメーション === */
.eye {
  display: inline-block;
  animation: eyeKyoro 2s ease-in-out infinite;
}

@keyframes eyeKyoro {
  0%, 100% { transform: translate(-50%, -50%) scaleX(1); }
  25% { transform: translate(-50%, -50%) scaleX(-1); }
  50% { transform: translate(-50%, -50%) scaleX(1); }
  75% { transform: translate(-50%, -50%) scaleX(-1) translateY(-2px); }
}

.eye-pop {
  animation: eyePop 0.4s ease-out, eyeKyoro 2s ease-in-out 0.4s infinite;
}

@keyframes eyePop {
  0% { transform: translate(-50%, -50%) scale(0); }
  60% { transform: translate(-50%, -50%) scale(1.3); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

/* === ボタン === */
.game-btn {
  padding: 12px 28px;
  font-size: 1.1rem;
  font-weight: bold;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  background: #FFF;
  color: #E65100;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  transition: transform 0.1s, box-shadow 0.1s;
  font-family: inherit;
}

.game-btn:active { transform: scale(0.95); box-shadow: 0 2px 6px rgba(0,0,0,0.1); }

.btn-primary { background: #FF6F00; color: #FFF; }
.btn-primary:active { background: #E65100; }

.btn-large { padding: 16px 40px; font-size: 1.3rem; }

.btn-row { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }

/* === モード選択 === */
.mode-grid { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; width: 100%; }

.mode-card {
  flex: 1;
  min-width: 180px;
  max-width: 220px;
  padding: 24px 16px;
  border-radius: 20px;
  text-align: center;
  cursor: pointer;
  transition: transform 0.15s;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
}

.mode-card:active { transform: scale(0.97); }

.kitchen-card { background: linear-gradient(135deg, #FFF9C4, #FFF176); }
.shop-card { background: linear-gradient(135deg, #FFCCBC, #FF8A65); }

.mode-icon { font-size: 3rem; margin-bottom: 8px; }
.mode-name { font-size: 1.2rem; color: #4E342E; margin-bottom: 4px; }
.mode-desc { font-size: 0.85rem; color: #795548; }

/* === レシピグリッド === */
.recipe-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  width: 100%;
}

.recipe-card {
  background: #FFF;
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  transition: transform 0.1s;
}

.recipe-card:active { transform: scale(0.96); }
.recipe-emoji { font-size: 2.5rem; margin-bottom: 8px; }
.recipe-name { font-size: 1rem; color: #4E342E; font-weight: bold; }

/* === 調理画面 === */
.step-indicator { display: flex; gap: 8px; justify-content: center; }

.step-dot {
  width: 32px; height: 32px;
  border-radius: 50%;
  background: #FFCC80;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.85rem; font-weight: bold; color: #FFF;
}

.step-dot.done { background: #66BB6A; }
.step-dot.current { background: #FF6F00; transform: scale(1.2); }

.step-title { font-size: 1.3rem; color: #E65100; }

.cooking-area {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.cooking-action { display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%; }

.action-display {
  font-size: 4rem;
  padding: 20px;
  border-radius: 50%;
  background: rgba(255,255,255,0.6);
  cursor: pointer;
  transition: transform 0.1s;
}

.action-display.holding { animation: holdPulse 0.3s ease-in-out infinite; }

@keyframes holdPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.tappable { cursor: pointer; }
.tappable:active { transform: scale(0.9); }

.tap-bounce { animation: tapBounce 0.15s ease-out; }

@keyframes tapBounce {
  0% { transform: scale(1); }
  50% { transform: scale(0.85); }
  100% { transform: scale(1); }
}

.action-hint {
  color: #FF6F00;
  font-weight: bold;
  font-size: 1rem;
  animation: hintPulse 1.5s ease-in-out infinite;
}

.action-hint.small { font-size: 0.8rem; color: #795548; }

@keyframes hintPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.tap-counter { font-size: 1.1rem; color: #4E342E; font-weight: bold; }

/* === プログレスバー === */
.progress-bar {
  width: 80%;
  height: 20px;
  background: #FFE0B2;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

.progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #FF6F00, #FF9800);
  border-radius: 10px;
  transition: width 0.15s;
}

/* === 目をつけるアクション === */
.eye-plate {
  position: relative;
  width: 180px;
  height: 180px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.eye-plate-burger { font-size: 5rem; }

.eye-btn {
  background: #7E57C2;
  color: #FFF;
  font-size: 1.1rem;
  padding: 12px 24px;
  border-radius: 50px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  font-family: inherit;
  box-shadow: 0 4px 12px rgba(126,87,194,0.3);
}

.eye-btn:active { transform: scale(0.95); background: #5E35B1; }
.eye-counter { font-size: 1.2rem; color: #4E342E; font-weight: bold; }

/* === トッピング === */
.topping-grid, .choice-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  width: 100%;
}

.topping-btn, .choice-btn {
  padding: 16px 8px;
  border: 3px solid transparent;
  border-radius: 16px;
  background: #FFF;
  font-size: 1.8rem;
  cursor: pointer;
  transition: all 0.15s;
  font-family: inherit;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.topping-btn.selected, .choice-btn.selected {
  border-color: #FF6F00;
  background: #FFF3E0;
  transform: scale(1.05);
}

.topping-name, .choice-name { font-size: 0.75rem; color: #4E342E; }
.action-title { font-size: 1.1rem; color: #E65100; font-weight: bold; }

/* === 完成画面 === */
.result-screen { justify-content: center; }

.complete-text {
  font-size: 2rem;
  color: #FF6F00;
  text-shadow: 2px 2px 0 rgba(255,255,255,0.5);
}

.dish-display {
  position: relative;
  text-align: center;
}

.dish-emoji { font-size: 5rem; }

.dish-eyes { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }

.topping-row { display: flex; gap: 4px; justify-content: center; margin-top: 4px; }
.topping-emoji { font-size: 1.5rem; }
.sauce-label { font-size: 0.9rem; color: #795548; margin-top: 4px; }

.result-subtitle { font-size: 1.3rem; color: #BF360C; }

.eye-comment { font-size: 1rem; color: #7E57C2; font-weight: bold; }

.special-badge {
  background: linear-gradient(135deg, #FFD54F, #FFA000);
  color: #FFF;
  padding: 10px 24px;
  border-radius: 50px;
  font-size: 1.1rem;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(255,160,0,0.3);
}

/* === ショップモード === */
.customer-area { display: flex; align-items: center; gap: 12px; width: 100%; }
.customer-face { font-size: 3rem; }
.customer-dialogue {
  background: #FFF;
  padding: 12px 16px;
  border-radius: 16px;
  border-radius: 16px 16px 16px 4px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  flex: 1;
}
.dialogue-text { font-size: 1rem; color: #4E342E; }

.order-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.level-badge {
  background: #FF6F00;
  color: #FFF;
  padding: 4px 12px;
  border-radius: 20px;
  font-weight: bold;
  font-size: 0.85rem;
}

.order-name { font-size: 1.1rem; color: #4E342E; font-weight: bold; }

.order-recipe { text-align: center; width: 100%; }
.recipe-label { font-size: 0.85rem; color: #795548; margin-bottom: 6px; }
.recipe-list { display: flex; gap: 4px; justify-content: center; flex-wrap: wrap; }
.recipe-item { font-size: 1.6rem; }

/* === タイマー === */
.timer-bar {
  width: 100%;
  height: 14px;
  background: #FFE0B2;
  border-radius: 7px;
  overflow: hidden;
}

.timer-fill {
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, #66BB6A, #43A047);
  border-radius: 7px;
  transition: width 1s linear;
}

.timer-fill.timer-danger {
  background: linear-gradient(90deg, #EF5350, #E53935);
  animation: timerFlash 0.5s ease-in-out infinite;
}

@keyframes timerFlash {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.time-text { font-size: 1rem; color: #4E342E; font-weight: bold; text-align: center; }

.mini-order {
  display: flex;
  gap: 2px;
  justify-content: center;
  background: rgba(255,255,255,0.6);
  padding: 6px 12px;
  border-radius: 12px;
}

.mini-item { font-size: 1.2rem; }

/* === バーガースタック === */
.stack-area {
  width: 100%;
  min-height: 160px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  background: rgba(255,255,255,0.4);
  border-radius: 16px;
  padding: 12px;
}

.stack-display { display: flex; align-items: flex-end; justify-content: center; min-height: 120px; }

.burger-stack {
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
}

.burger-layer {
  font-size: 2.2rem;
  line-height: 1;
  margin: -4px 0;
  animation: layerDrop 0.2s ease-out;
}

@keyframes layerDrop {
  0% { transform: translateY(-30px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

/* === 材料トレー === */
.ingredient-tray {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  width: 100%;
}

.ingredient-btn {
  padding: 8px 4px;
  border: 2px solid #FFE0B2;
  border-radius: 12px;
  background: #FFF;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.1s;
  font-family: inherit;
}

.ingredient-btn:active { transform: scale(0.92); background: #FFF3E0; }

.ing-bounce { animation: tapBounce 0.2s ease-out; }
.ing-name { font-size: 0.6rem; color: #795548; display: block; }

/* === 評価画面 === */
.customer-reaction {
  text-align: center;
  padding: 16px;
}

.reaction-face { font-size: 4rem; margin-bottom: 8px; }

.reaction-text {
  font-size: 1.3rem;
  font-weight: bold;
  color: #4E342E;
  white-space: pre-line;
}

.customer-reaction.perfect .reaction-text { color: #FF6F00; }
.customer-reaction.good .reaction-text { color: #66BB6A; }

.stars { font-size: 2rem; letter-spacing: 4px; }

.compare-area {
  display: flex;
  gap: 20px;
  justify-content: center;
  width: 100%;
}

.compare-side { text-align: center; flex: 1; }
.compare-label { font-size: 0.85rem; color: #795548; margin-bottom: 8px; font-weight: bold; }

/* === アルバム === */
.album-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  width: 100%;
}

.album-card {
  background: #FFF;
  border-radius: 12px;
  padding: 12px 8px;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

.album-emoji { font-size: 2rem; }
.album-eyes { font-size: 0.75rem; color: #7E57C2; }
.album-name { font-size: 0.7rem; color: #4E342E; margin-top: 4px; }
.album-stars { font-size: 0.8rem; }
.album-empty { color: #795548; font-size: 1rem; text-align: center; padding: 40px 0; }

/* === 実績 === */
.achievements-section { width: 100%; }
.section-title { font-size: 1.1rem; color: #E65100; margin-bottom: 8px; }

.achievement-grid { display: flex; flex-direction: column; gap: 8px; }

.achievement-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 12px;
  background: #FFF;
}

.achievement-card.locked { opacity: 0.5; }
.achievement-card.unlocked { background: linear-gradient(90deg, #FFF8E1, #FFECB3); }
.ach-icon { font-size: 1.5rem; }
.ach-name { font-size: 0.85rem; color: #4E342E; }

/* === 統計 === */
.stats-area { width: 100%; display: flex; flex-direction: column; gap: 8px; }

.stat-item {
  background: #FFF;
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 1rem;
  color: #4E342E;
}

.stat-item.highlight { background: linear-gradient(90deg, #FFF8E1, #FFD54F); }
.progress-message { color: #795548; text-align: center; }

/* === エフェクト === */
.sparkle {
  position: absolute;
  font-size: 1.5rem;
  pointer-events: none;
  animation: sparkleAnim 1.2s ease-out forwards;
}

@keyframes sparkleAnim {
  0% { transform: scale(0) rotate(0deg); opacity: 1; }
  50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
  100% { transform: scale(0) rotate(360deg); opacity: 0; }
}

.flames {
  position: absolute;
  bottom: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

.flame {
  font-size: 2rem;
  animation: flameAnim 0.4s ease-in-out infinite alternate;
  position: absolute;
  bottom: -10px;
}

@keyframes flameAnim {
  0% { transform: translateY(0) scale(1); }
  100% { transform: translateY(-8px) scale(1.1); }
}

.smoke-container { position: absolute; width: 100%; pointer-events: none; }

.smoke {
  position: absolute;
  font-size: 1.5rem;
  animation: smokeRise 1.5s ease-out forwards;
  opacity: 0.7;
}

@keyframes smokeRise {
  0% { transform: translateY(0); opacity: 0.7; }
  100% { transform: translateY(-60px); opacity: 0; }
}

.oil-drop {
  position: absolute;
  width: 6px;
  height: 6px;
  background: #FFD54F;
  border-radius: 50%;
  animation: oilPop 0.6s ease-out forwards;
}

@keyframes oilPop {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-30px) scale(0); opacity: 0; }
}

/* === アニメーション汎用 === */
.pop-in { animation: popIn 0.4s ease-out; }

@keyframes popIn {
  0% { transform: scale(0); opacity: 0; }
  70% { transform: scale(1.15); }
  100% { transform: scale(1); opacity: 1; }
}

.bounce-text { animation: bounceText 2s ease-in-out infinite; }

@keyframes bounceText {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* === レスポンシブ === */
@media (max-width: 400px) {
  .game-title { font-size: 1.4rem; }
  .title-burger-emoji { font-size: 80px; }
  .mode-card { min-width: 140px; padding: 16px 12px; }
  .ingredient-tray { grid-template-columns: repeat(4, 1fr); gap: 4px; }
  .ingredient-btn { font-size: 1.2rem; padding: 6px 2px; }
  .album-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (min-width: 600px) {
  #game { padding: 0 20px; }
  .recipe-grid { gap: 16px; }
  .topping-grid, .choice-grid { grid-template-columns: repeat(3, 1fr); }
}
